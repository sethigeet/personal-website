---
import { Image } from "astro:assets";

import type { Technology } from "@lib/logos";

interface Logo {
  name: Technology;
  path: string;
}
// prettier-ignore
export const LOGOS: Logo[] = [
  { name: "Apache",  path: "/src/assets/icons/tech-logos/apache.svg" },
  { name: "Astro", path: "/src/assets/icons/tech-logos/astro.png" },
  { name: "AWS", path: "/src/assets/icons/tech-logos/aws.svg" },
  { name: "C", path: "/src/assets/icons/tech-logos/c.svg" },
  { name: "C++", path: "/src/assets/icons/tech-logos/c++.svg" },
  { name: "CSS", path: "/src/assets/icons/tech-logos/css.svg" },
  { name: "Django", path: "/src/assets/icons/tech-logos/django.svg" },
  { name: "Docker", path: "/src/assets/icons/tech-logos/docker.svg" },
  { name: "FastAPI", path: "/src/assets/icons/tech-logos/fastapi.svg" },
  { name: "Figma", path: "/src/assets/icons/tech-logos/figma.svg" },
  { name: "Git", path: "/src/assets/icons/tech-logos/git.svg" },
  { name: "HTML", path: "/src/assets/icons/tech-logos/html.svg" },
  { name: "JavaScript", path: "/src/assets/icons/tech-logos/javascript.svg" },
  { name: "Linux", path: "/src/assets/icons/tech-logos/linux.svg" },
  { name: "Lua", path: "/src/assets/icons/tech-logos/lua.svg" },
  { name: "MongoDB", path: "/src/assets/icons/tech-logos/mongodb.svg" },
  { name: "MySQL", path: "/src/assets/icons/tech-logos/mysql.svg" },
  { name: "Next.js", path: "/src/assets/icons/tech-logos/nextjs.png" },
  { name: "Nginx", path: "/src/assets/icons/tech-logos/nginx.svg" },
  { name: "Node.js", path: "/src/assets/icons/tech-logos/nodejs.svg" },
  { name: "PostgreSQL", path: "/src/assets/icons/tech-logos/postgresql.svg" },
  { name: "Python", path: "/src/assets/icons/tech-logos/python.svg" },
  { name: "React", path: "/src/assets/icons/tech-logos/react.svg" },
  { name: "Redis", path: "/src/assets/icons/tech-logos/redis.svg" },
  { name: "Rust", path: "/src/assets/icons/tech-logos/rust.png" },
  { name: "SCSS", path: "/src/assets/icons/tech-logos/sass.svg" },
  { name: "Tailwind CSS", path: "/src/assets/icons/tech-logos/tailwind.svg" },
  { name: "TypeScript", path: "/src/assets/icons/tech-logos/typescript.svg" },
];

interface Props {
  name: Technology;
  size?: number;
}
const { name, size = 60 } = Astro.props;

const logo = LOGOS.find((logo) => logo.name === name);
if (!logo) {
  throw new Error(`${name} is not a valid technology name`);
}

// Import the logo for Astro's Image component
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/icons/tech-logos/*.{svg,png,jpg,jpeg}",
);
---

<Image
  src={images[logo.path]()}
  alt={logo.name}
  class="object-contain"
  width={size}
  height={size}
  loading="eager"
/>
